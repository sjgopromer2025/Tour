package tourDTO;

import tourVO.mapVO;

public class mapDTO extends CommonDTO
{
	private mapVO vo ;

	public void setVo(mapVO vo) {		this.vo = vo;	}
	
	public boolean load_map_element()
	{
		String x = "";
		String y = "";
		try
		{

			String[] data_arr = this.vo.getData().split(",");
			for (int i = 0; i < data_arr.length; i++) 
			{
				//좌표  x,y 를 담는 것
				String[] coordinate = load_map(data_arr[i]);
				if(i != data_arr.length-1) 
				{
					x += coordinate[0] + ",";
					y += coordinate[1] + ",";
				}else
				{
					x += coordinate[0] ;
					y += coordinate[1] ;
				}
				
			}
			this.vo.setLat(x);
			this.vo.setLog(y);
			
		}catch (Exception e) 
		{
			e.printStackTrace();
			return false;
		}
		
		return true;
	}
	
	
	public String[] load_map(String place)
	{
		String[] coordinate = new String[2];
		try
		{
			this.OpenDB();
			//select * from course where c_city='익산' and c_place like '%미륵사지%';
			//  c_x  c_y 
			String sql = "select c_x, c_y from course ";
			sql += "where c_city = '"+ this.vo.getCity() +"' and ";
			sql	+= "c_place= '"+place +"' ";
			
			this.RunQuery(sql);
			
			if(this.GetNextResult() == true)
			{
				coordinate[0] = this.GetValue("c_x");
				coordinate[1] = this.GetValue("c_y");
			}
			
			this.CloseQuery();
			this.CloseDB();
		}catch (Exception e) {
			e.printStackTrace();
			System.out.println("load_map오류");
			return null;
		}
		
		
		return coordinate;
	}
	
	public static void main(String[] args)
	{
		
	}
}
